"use strict";(self.webpackChunkflashscore=self.webpackChunkflashscore||[]).push([[1909],{23831:(e,t,n)=>{var i,r=n(15503);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.NOT_INITIALIZED="NOT_INITIALIZED",e.INITIALIZED="PERMISSION_GRANTED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.UNSUPPORTED="UNSUPPORTED"}(i||(i={}));let a=function(){function e(t,n,i,r,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_requestNotificationPermission",void 0),o(this,"_serviceWorkerSupportCheck",void 0),o(this,"_subscribeServiceWorker",void 0),o(this,"_messagingServiceWorker",void 0),o(this,"_registerTokenListener",void 0),o(this,"_logger",void 0),o(this,"_stepRunCache",new Map),this._requestNotificationPermission=t,this._serviceWorkerSupportCheck=n,this._subscribeServiceWorker=i,this._messagingServiceWorker=r,this._registerTokenListener=s,this._logger=a}var t,n,r;return t=e,(n=[{key:"run",value:function(){return this._rejectWith(this._serviceWorkerSupportCheck.make(),i.UNSUPPORTED).then((()=>this._rejectWith(this._requestNotificationPermission.make(),i.PERMISSION_DENIED))).then((()=>this._rejectWith(this._subscribeServiceWorker.make(),i.UNSUPPORTED))).then((e=>this._rejectWith(this._runWhenNotSuccessfulAlready(this._messagingServiceWorker,e),i.UNSUPPORTED))).then((()=>this._rejectWith(this._registerTokenListener.make(),i.UNSUPPORTED))).then((()=>Promise.resolve(i.INITIALIZED)))}},{key:"_runWhenNotSuccessfulAlready",value:function(e,t){return this._stepRunCache.has(e)?Promise.resolve(this._stepRunCache.get(e)):e.make(t).then((t=>(this._stepRunCache.set(e,t),Promise.resolve(t))))}},{key:"_rejectWith",value:function(e,t){return e.catch((e=>(this._logger(e),Promise.reject(t))))}}])&&s(t.prototype,n),r&&s(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_delegate",void 0),u(this,"_onResult",void 0),this._delegate=t,this._onResult=n}var t,n,i;return t=e,(n=[{key:"make",value:function(e){return this._delegate.make(e).then((e=>(this._onResult(e),Promise.resolve(e))))}}])&&l(t.prototype,n),i&&l(t,i),e}();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"make",value:function(){return Notification.requestPermission()}}])&&h(t.prototype,n),i&&h(t,i),e}();function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"navigator",void 0),p(this,"window",void 0),this.navigator=t,this.window=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return"serviceWorker"in this.navigator&&"PushManager"in this.window?Promise.resolve():Promise.reject("Push messages not supported")}}])&&_(t.prototype,n),i&&_(t,i),e}();function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"pushServiceWorkerLocation",void 0),b(this,"navigator",void 0),this.navigator=t,this.pushServiceWorkerLocation=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return this.navigator.serviceWorker.register(this.pushServiceWorkerLocation).then((e=>Promise.resolve(e))).catch((e=>Promise.reject("SW registration failed: "+JSON.stringify(e))))}}])&&d(t.prototype,n),i&&d(t,i),e}();var y=n(68633);function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let w=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="messaging")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.messaging=t}var t,n,i;return t=e,(n=[{key:"make",value:function(e){return(0,y.LP)(this.messaging,{serviceWorkerRegistration:e})}}])&&m(t.prototype,n),i&&m(t,i),e}();function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"messaging",void 0),C(this,"tokenListener",void 0),this.messaging=t,this.tokenListener=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return(0,y.LP)(this.messaging).then((e=>{e&&this.tokenListener(e)}))}}])&&k(t.prototype,n),i&&k(t,i),e}();var T;function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.DEFAULT="default",e.DENIED="denied",e.GRANTED="granted"}(T||(T={}));let S=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_windowPermissionProvider")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._windowPermissionProvider=t}var t,n,i;return t=e,(n=[{key:"getPermissions",value:function(){let e=T.DEFAULT;switch(this._windowPermissionProvider()){case"denied":e=T.DENIED;break;case"granted":e=T.GRANTED}return Promise.resolve(e)}}])&&O(t.prototype,n),i&&O(t,i),e}();var I;function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.HTML_TEMPLATE='<div id="notifications-alert">\n\t<div class="alert alert--notifications">##MESSAGE##</div>\n</div>'}(I||(I={}));let j=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"windowPermissionProvider",void 0),A(this,"alertWrapper",void 0),A(this,"hasMyTeamsOrMyGames",void 0),A(this,"_utilTrans",void 0),A(this,"_storage",void 0),A(this,"_hidden",!1),A(this,"_subscribeCallback",(()=>{})),A(this,"_pendingCallback",(()=>{})),A(this,"_deniedCallback",(()=>{})),this.windowPermissionProvider=t,this.alertWrapper=n,this.hasMyTeamsOrMyGames=i}var t,n,i;return t=e,(n=[{key:"run",value:async function(){switch(await this.getStatus()){case T.DEFAULT:this._alertNotificationsDefault();break;case T.GRANTED:this._alertNotificationGranted();break;case T.DENIED:this._alertNotificationDenied()}}},{key:"getStatus",value:async function(){return new S(this.windowPermissionProvider).getPermissions()}},{key:"setTranslations",value:function(e){return this._utilTrans=e,this}},{key:"setStorage",value:function(e){return this._storage=e,this}},{key:"setSubscribeCallback",value:function(e){return this._subscribeCallback=e,this}},{key:"setPendingCallback",value:function(e){return this._pendingCallback=e,this}},{key:"setDeniedCallback",value:function(e){return this._deniedCallback=e,this}},{key:"showAlert",value:function(){this.alertWrapper&&!this._hidden&&(this.alertWrapper.style.display=this.hasMyTeamsOrMyGames()?"block":"none")}},{key:"hideAlert",value:function(){this._hidden=!0,this.alertWrapper&&(this.alertWrapper.style.display="none")}},{key:"_alertNotificationsDefault",value:function(){const e=!!this._storage.getSession("LS_notifications_dismissed");if(this.alertWrapper&&!e){let e=I.HTML_TEMPLATE;const t=this._utilTrans.translate("TRANS_NOTIFICATIONS_ARE_OFF"),n=this._utilTrans.translate("TRANS_NOTIFICATIONS_PROMPT"),i=this._utilTrans.translate("TRANS_NOTIFICATIONS_SET");e=e.replace("##MESSAGE##",`\n\t\t\t\t\t<div class="alert__icon"></div>\n\t\t\t\t\t<div class="alert__close" onclick="this.parentElement.style.display = 'none'"></div>\n\t\t\t\t\t<div class="alert__text"><strong>${t}.</strong> ${n}</div>\n\t\t\t\t\t<div id="notifications-alert-button" class="alert__button">${i}</div>`),this.alertWrapper.innerHTML=e;const r=document.getElementById("notifications-alert-button");r&&(r.onclick=this._subscribeCallback),this._pendingCallback()}}},{key:"_alertNotificationGranted",value:function(){this.alertWrapper&&this.hideAlert(),this._subscribeCallback()}},{key:"_alertNotificationDenied",value:function(){const e=!!this._storage.getSession("LS_notifications_dismissed");if(this.alertWrapper&&!e){let e=I.HTML_TEMPLATE;const t=this._utilTrans.translate("TRANS_NOTIFICATIONS_BLOCKED_BY_BROWSER"),n=this._utilTrans.translate("TRANS_NOTIFICATIONS_BLOCKED_PROMPT");e=e.replace("##MESSAGE##",`\n\t\t\t\t\t<div class="alert__icon"></div>\n\t\t\t\t\t<div class="alert__close" onclick="this.parentElement.style.display = 'none'"></div>\n\t\t\t\t\t<div class="alert__text"><strong>${t}.</strong> ${n}</div>`),this.alertWrapper.innerHTML=e,this.showAlert()}this._deniedCallback()}}])&&E(t.prototype,n),i&&E(t,i),e}();var N=n(25702);function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let D=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_pathPrefix")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._pathPrefix=t}var t,n,i;return t=e,(n=[{key:"makeRequest",value:function(e){const t={};for(const n in e.params)t[n]=e.params[n];return new N.c(this._pathPrefix+e.path+"/",t)}}])&&q(t.prototype,n),i&&q(t,i),e}();function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let F=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,"_requestProvider",void 0),R(this,"_apiResponseChecker",void 0),R(this,"_requestor",void 0),this._requestProvider=t,this._apiResponseChecker=n,this._requestor=i}var t,n,i;return t=e,(n=[{key:"makeCall",value:function(e){return this._requestor.makeRequest(this._requestProvider.makeFor(e)).then((e=>this._apiResponseChecker.isOk(e)?Promise.resolve():Promise.reject("Invalid server response: '"+JSON.stringify(e)+"'")))}}])&&L(t.prototype,n),i&&L(t,i),e}();function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"isOk",value:function(e){return"ok"==e.getContent()}}])&&M(t.prototype,n),i&&M(t,i),e}();function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array");if(!e.length)throw new Error("Params should be non array");e.forEach((e=>null!=e.getId()))}}])&&G(t.prototype,n),i&&G(t,i),e}();function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let J=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,"_apiCallDelegate",void 0),z(this,"_paramsValidator",void 0),this._apiCallDelegate=t,this._paramsValidator=n}var t,n,i;return t=e,(n=[{key:"makeCall",value:function(e){try{this._paramsValidator.throwOnInvalidParams(e)}catch(t){return Promise.reject("Invalid params '"+JSON.stringify(e)+"'. "+t.message)}return this._apiCallDelegate.makeCall(e)}}])&&U(t.prototype,n),i&&U(t,i),e}();function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Z(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let K=function(){function e(t,n,i){V(this,e),B(this,"_requestProvider",void 0),B(this,"_responseChecker",void 0),B(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new $(n,i),this._responseChecker=new W}return Z(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new x)}}]),e}(),$=function(){function e(t,n){V(this,e),B(this,"_tokenPart",void 0),B(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return Z(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe",params:{channels:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let te=function(){function e(t,n,i){Y(this,e),ee(this,"_requestProvider",void 0),ee(this,"_responseChecker",void 0),ee(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new ne(n,i),this._responseChecker=new W}return X(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new x)}}]),e}(),ne=function(){function e(t,n){Y(this,e),ee(this,"_tokenPart",void 0),ee(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return X(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"unsubscribe",params:{channels:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array");if(!e.length)throw new Error("Params should be non array");e.forEach((e=>null!=e.getValue()))}}])&&ie(t.prototype,n),i&&ie(t,i),e}();function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ae(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ue=function(){function e(t,n,i){se(this,e),le(this,"_requestProvider",void 0),le(this,"_responseChecker",void 0),le(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new he(n,i),this._responseChecker=new W}return ae(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new ce)}}]),e}(),ce=function(){function e(){se(this,e),le(this,"_channelsValidator",new x),le(this,"_settingsValidator",new re)}return ae(e,[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array [Channel[], Option[]]");this._channelsValidator.throwOnInvalidParams(e[0]),this._settingsValidator.throwOnInvalidParams(e[1])}}]),e}(),he=function(){function e(t,n){se(this,e),le(this,"_tokenPart",void 0),le(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return ae(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-all",params:{channels:JSON.stringify(e[0].map((e=>e.getId()))),settings:JSON.stringify(e[1].map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pe(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let de=function(){function e(t,n,i){fe(this,e),ve(this,"_requestProvider",void 0),ve(this,"_responseChecker",void 0),ve(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new be(n,i),this._responseChecker=new W}return pe(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new re)}}]),e}(),be=function(){function e(t,n){fe(this,e),ve(this,"_tokenPart",void 0),ve(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return pe(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"settings",params:{settings:JSON.stringify(e.map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function me(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ke=function(){function e(t,n,i){ge(this,e),we(this,"_requestProvider",void 0),we(this,"_responseChecker",void 0),we(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new Ce(n,i),this._responseChecker=new W}return me(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new re)}}]),e}(),Ce=function(){function e(t,n){ge(this,e),we(this,"_tokenPart",void 0),we(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return me(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-token",params:{settings:JSON.stringify(e.map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oe(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ie=function(){function e(t,n,i){Pe(this,e),Se(this,"_requestProvider",void 0),Se(this,"_responseChecker",void 0),Se(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new Ee(n,i),this._responseChecker=new W}return Oe(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new x)}}]),e}(),Ee=function(){function e(t,n){Pe(this,e),Se(this,"_tokenPart",void 0),Se(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return Oe(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-disable",params:{channelsDisabled:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ne(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let De=function(){function e(t,n,i){Ae(this,e),qe(this,"_requestProvider",void 0),qe(this,"_responseChecker",void 0),qe(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new Le(n,i),this._responseChecker=new W}return Ne(e,[{key:"make",value:function(){return new J(new F(this._requestProvider,this._responseChecker,this._requestor),new x)}}]),e}(),Le=function(){function e(t,n){Ae(this,e),qe(this,"_tokenPart",void 0),qe(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return Ne(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"unsubscribe-disable",params:{channelsDisabled:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function Re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Me=function(){function e(t,n,i,r,s,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fe(this,"_addChannelsApiCall",void 0),Fe(this,"_removeChannelsApiCall",void 0),Fe(this,"_updateSettingsApiCall",void 0),Fe(this,"_unSubscribeAllApiCall",void 0),Fe(this,"_subscribeAllApiCall",void 0),Fe(this,"_unSubscribeDisableApiCall",void 0),Fe(this,"_subscribeDisableApiCall",void 0),this._addChannelsApiCall=t,this._removeChannelsApiCall=n,this._updateSettingsApiCall=i,this._unSubscribeAllApiCall=r,this._subscribeAllApiCall=s,this._unSubscribeDisableApiCall=o,this._subscribeDisableApiCall=a}var t,n,i;return t=e,(n=[{key:"addChannels",value:function(e){return this._addChannelsApiCall.makeCall(e)}},{key:"removeChannels",value:function(e){return this._removeChannelsApiCall.makeCall(e)}},{key:"updateSettings",value:function(e){return this._updateSettingsApiCall.makeCall(e)}},{key:"subscribeAll",value:function(e,t){return this._subscribeAllApiCall.makeCall([e,t])}},{key:"unSubscribeAll",value:function(e){return this._unSubscribeAllApiCall.makeCall(e)}},{key:"subscribeDisable",value:function(e){return this._subscribeDisableApiCall.makeCall(e)}},{key:"unSubscribeDisable",value:function(e){return this._unSubscribeDisableApiCall.makeCall(e)}}])&&Re(t.prototype,n),i&&Re(t,i),e}();var We=n(84004);function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"_delegateApi",void 0),xe(this,"_promiseSerializer",void 0),this._delegateApi=t,this._promiseSerializer=new We.$b({nextPromise:e=>e()})}var t,n,i;return t=e,(n=[{key:"addChannels",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.addChannels(e)))}},{key:"removeChannels",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.removeChannels(e)))}},{key:"updateSettings",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.updateSettings(e)))}},{key:"subscribeAll",value:function(e,t){return this._promiseSerializer.next((()=>this._delegateApi.subscribeAll(e,t)))}},{key:"unSubscribeAll",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.unSubscribeAll(e)))}},{key:"subscribeDisable",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.subscribeDisable(e)))}},{key:"unSubscribeDisable",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.unSubscribeDisable(e)))}}])&&Ge(t.prototype,n),i&&Ge(t,i),e}();function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Je(this,"_requestor",void 0),Je(this,"_userTokenGetter",void 0),Je(this,"_platformPrefix","")}var t,n,i;return t=e,(n=[{key:"setRequestor",value:function(e){return this._requestor=e,this}},{key:"setPlatformPrefix",value:function(e){return this._platformPrefix=e,this}},{key:"setUserTokenGetter",value:function(e){return this._userTokenGetter=e,this}},{key:"build",value:function(){const e=new K(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),t=new te(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),n=new de(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),i=new ke(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),r=new ue(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),s=new Ie(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make(),o=new De(this._requestor,this._userTokenGetter,new D(this._platformPrefix)).make();return new Ue(new Me(e,t,n,i,r,o,s))}}])&&ze(t.prototype,n),i&&ze(t,i),e}();function He(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Be=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ze(this,"pushApi",void 0),Ze(this,"subscriptionCollectionFactory",void 0),Ze(this,"disabledSubscriptionCollectionFactory",void 0),Ze(this,"settingsCollectionFactory",void 0),Ze(this,"doInit",!0),Ze(this,"promiseSerializer",void 0),Ze(this,"subscribedEmpty",!1),this.pushApi=t,this.subscriptionCollectionFactory=n,this.disabledSubscriptionCollectionFactory=i,this.settingsCollectionFactory=r,this.promiseSerializer=new We.$b({nextPromise:e=>e()})}var t,n,i;return t=e,(n=[{key:"channelsChanged",value:function(e,t,n){return this.promiseSerializer.next((()=>{if(0==e.length&&this.subscribedEmpty)return Promise.resolve();if(0==e.length)return this.doInit=!0,this.pushApi.unSubscribeAll(n).then((()=>{this.subscribedEmpty=!0}));if(this.subscribedEmpty=!1,this.doInit)return Promise.all([this.pushApi.subscribeAll(e,n),t.length?this.pushApi.subscribeDisable(t):void 0]).then((()=>(this.doInit=!1,Promise.resolve())));const i=[],r=[],s=[],o=[],a=this.subscriptionCollectionFactory(),l=this.disabledSubscriptionCollectionFactory();return e.forEach((e=>{a.has(e)||i.push(e)})),t.forEach((e=>{l.has(e)||s.push(e)})),a.getAll().forEach((t=>{let n=!1;for(const i of e)if(JSON.stringify(i)==JSON.stringify(t)){n=!0;break}n||r.push(t)})),l.getAll().forEach((e=>{let n=!1;for(const i of t)if(JSON.stringify(i)==JSON.stringify(e)){n=!0;break}n||o.push(e)})),Promise.all([i.length?this.pushApi.addChannels(i):void 0,r.length?this.pushApi.removeChannels(r):void 0,s.length?this.pushApi.subscribeDisable(s):void 0,o.length?this.pushApi.unSubscribeDisable(o):void 0,this.handleSettings(n)]).then((()=>Promise.resolve()))}))}},{key:"handleSettings",value:function(e){const t=this.settingsCollectionFactory();let n=!1;for(const i of e)if(!t.has(i)){n=!0;break}return n||t.getAll().forEach((t=>{let i=!1;for(const n of e)if(JSON.stringify(n)==JSON.stringify(t)){i=!0;break}i||(n=!0)})),n?this.pushApi.updateSettings(e):Promise.resolve()}}])&&He(t.prototype,n),i&&He(t,i),e}();var Ke=n(8789);function $e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Ye=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s;const o=n.split("_")[1];this._id=t+"_TEAM_"+o}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&$e(t.prototype,n),i&&$e(t,i),e}();function Qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Xe=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,this._id=`lsid_${t}_${n}`}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&Qe(t.prototype,n),i&&Qe(t,i),e}();function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let tt=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,this._id=`${t}_${n}`}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&et(t.prototype,n),i&&et(t,i),e}();function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let it=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s;const o=n.split("_")[2];this._id=t+"_"+o}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&nt(t.prototype,n),i&&nt(t,i),e}();var rt=n(64216);function st(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let ot=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(n="_options")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,this._options=new rt.FJ({serialize:e=>e.getValue()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{e&&e.getAll().forEach((e=>{t._options.add(e)})),n(t._options)}))}},{key:"getOptions",value:function(){return this._options.clone()}},{key:"setOptions",value:function(e){return new Promise(((t,n)=>{this._options.clear();const i=[];for(const t of e)this._options.add(t),i.push(t.getValue())}))}}])&&st(t.prototype,n),i&&st(t,i),e}();var at=n(62938),lt=n(81254),ut=n(80569);function ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let ht=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"makeRequest",value:function(e){return new Promise(((t,n)=>{const i={};e.getHeaders().forEach(((e,t)=>{i[t]=e}));const r=e.getParameters();r.appVersion="1.0",r.appId="com.flashscore",ut.post(e.getUrl()).type("form").send(r).timeout({response:e.getPendingTimeout(),deadline:e.getConnectionTimeout()}).set(i).then((e=>{const n=new Map;for(const t in e.header)n.set(t,e.header[t]);t(new lt.KH(e.text,e.status,n))}),(e=>n(e.message)))}))}}])&&ct(t.prototype,n),i&&ct(t,i),e}();function ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let pt=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_t(this,"_id",void 0),_t(this,"_email",void 0),_t(this,"_hash",void 0),_t(this,"_namespace",void 0),this._id=t,this._email=n,this._hash=i,this._namespace=r}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}},{key:"getEmail",value:function(){return this._email}},{key:"getHash",value:function(){return this._hash}},{key:"getNamespace",value:function(){return this._namespace}}])&&ft(t.prototype,n),i&&ft(t,i),e}();function vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let bt=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dt(this,"_lsnpPath",void 0),dt(this,"_language",void 0),dt(this,"_token",void 0),dt(this,"_enabled",void 0),this._lsnpPath=t,this._language=n,this._token=i||"",this._enabled=void 0===r||r}var t,n,i;return t=e,(n=[{key:"setToken",value:function(e){return this._token=e||"",this}},{key:"getToken",value:function(){return this._token}},{key:"getLsnpPath",value:function(){return this._lsnpPath}},{key:"getLanguage",value:function(){return this._language}},{key:"isEnabled",value:function(){return this._enabled}}])&&vt(t.prototype,n),i&&vt(t,i),e}();function gt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let kt=function(){function e(t,n,i,r,s,o,a,l,u,c,h,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wt(this,"_messaging",void 0),wt(this,"_language",void 0),wt(this,"_platformPrefix",void 0),wt(this,"_window",void 0),wt(this,"_navigator",void 0),wt(this,"_serviceWorkerLocation",void 0),wt(this,"_credentials",void 0),wt(this,"_logger",void 0),wt(this,"_permissionProvider",void 0),wt(this,"_enabled",!1),wt(this,"_alertWrapper",void 0),wt(this,"_notificationStatusAlert",void 0),wt(this,"_registrationListener",(()=>null)),wt(this,"_pushApi",void 0),wt(this,"_synchonizer",void 0),wt(this,"_myGames",void 0),wt(this,"_myTeams",void 0),wt(this,"_tokenStorage",void 0),wt(this,"_currentChannels",void 0),wt(this,"_currentDisabledChannels",void 0),wt(this,"_disabledChannels",void 0),wt(this,"_currentSettings",void 0),wt(this,"_loginClient",void 0),wt(this,"_settings",void 0),this._messaging=t,this._language=n,this._platformPrefix=i,this._window=r,this._navigator=s,this._serviceWorkerLocation=o,this._credentials=h,this._logger=f,this._tokenStorage=a,a.init().then((()=>{this.synchronize()})),l.init().then((()=>{this._currentChannels=l,this.synchronize()})),u.init().then((()=>{this._currentDisabledChannels=u,this._disabledChannels=[],this._currentDisabledChannels.getChannels().getAll().forEach((e=>{this._disabledChannels.push(e)})),this.synchronize()})),c.init((0,Ke._)()).then((e=>{this._currentSettings=c;const t=new ot;t.init(e).then((()=>{this._settings=t,this.synchronize()}))}))}var t,n,i;return t=e,(n=[{key:"enable",value:function(){this._enabled=!0}},{key:"setPermissionProvider",value:function(e){return this._permissionProvider=e,this}},{key:"setAlertWrapper",value:function(e){return this._alertWrapper=e,this}},{key:"_getToken",value:function(){return this._tokenStorage.getToken()}},{key:"setUserToken",value:function(e){const t=!!this.getUserToken()||this.getUserToken()!==e,n=!this.getUserToken()||this.isUserTokenEnabled();return t&&(this._tokenStorage.setToken(new bt(this._platformPrefix,this._language,e,n)),this.synchronize()),this}},{key:"getUserToken",value:function(){return this._getToken().getToken()}},{key:"isUserTokenEnabled",value:function(){return this._getToken().isEnabled()}},{key:"setUserTokenEnabled",value:function(e){this._tokenStorage.setToken(new bt(this._platformPrefix,this._language,this.getUserToken(),e)),this.synchronize()}},{key:"setMyGames",value:function(e){return this._myGames=e,this}},{key:"setMyTeams",value:function(e){return this._myTeams=e,this}},{key:"setLoginClient",value:function(e){return this._loginClient=e,this}},{key:"_getApi",value:function(){return this._pushApi||(this._pushApi=(new Ve).setPlatformPrefix(this._platformPrefix).setRequestor(new ht).setUserTokenGetter((()=>this.getUserToken())).build()),this._pushApi}},{key:"_getSynchronizer",value:function(){return this._synchonizer||(this._synchonizer=new Be(this._getApi(),(()=>this.getCurrentChannels()),(()=>this.getCurrentDisabledChannels()),(()=>this.getCurrentSettings()))),this._synchonizer}},{key:"getStatusAlert",value:function(){return this._notificationStatusAlert||(this._notificationStatusAlert=new j(this._permissionProvider,this._alertWrapper,(()=>this.hasMyTeamsOrMyGames()))),this._notificationStatusAlert}},{key:"getNotificationInit",value:function(){const e=new f,t=new v(this._navigator,this._window),n=new c(new g(this._navigator,this._serviceWorkerLocation),this._registrationListener),i=new w(this._messaging),r=new P(this._messaging,(e=>this.setUserToken(e)));return new a(e,t,n,i,r,this._logger)}},{key:"getCurrentChannels",value:function(){return this._currentChannels.getChannels()}},{key:"getCurrentDisabledChannels",value:function(){return this._currentDisabledChannels.getChannels()}},{key:"getCurrentSettings",value:function(){const e=this._currentSettings.getOptions();if(e.isEmpty())for(const t of Ke.A)e.add(t);return e}},{key:"addSettingOption",value:function(e){const t=this._getSettingsOptions();return t.push(new at.I(e)),this._settings.setOptions(t)}},{key:"removeSettingOption",value:function(e){const t=this._getSettingsOptions().filter((t=>t.getValue()!==e));return this._settings.setOptions(t)}},{key:"muteChannel",value:function(e){const t=this._getDisabledChannels();return t.push(new tt(this._language,e)),this._disabledChannels=t,this.synchronize()}},{key:"unMuteChannel",value:function(e){const t=new tt(this._language,e).getId(),n=this._getDisabledChannels().filter((e=>e.getId()!==t));return this._disabledChannels=n,this.synchronize()}},{key:"synchronize",value:function(){return new Promise(((e,t)=>{if(!(this._enabled&&this.getUserToken()&&this._currentSettings&&this._currentChannels&&this._currentDisabledChannels))return void e(!1);const n=[];this.isUserTokenEnabled()&&(n.push.apply(n,gt(this._getLoginClientChannels())),n.push.apply(n,gt(this._getMyGamesChannels())),n.push.apply(n,gt(this._getMyTeamsChannels())));const i=this._getDisabledChannels(),r=[];r.push.apply(r,gt(this._getSettingsOptions())),this._getSynchronizer().channelsChanged(n,i,r).then((()=>{this._currentChannels.setChannels(n),this._currentDisabledChannels.setChannels(i),this._currentSettings.setOptions(r),e(!0)})).catch((()=>{e(!1)}))}))}},{key:"_getDisabledChannels",value:function(){return this._disabledChannels}},{key:"_getSettingsOptions",value:function(){const e=[];let t;return t=this._settings?this._settings.getOptions():(0,Ke._)(),t.getAll().forEach((t=>{e.push(t)})),e}},{key:"_getMyGamesChannels",value:function(){const e=[];if(this._myGames){const t=this._myGames.getContainer();if(t){const n=Object.keys(t);for(const t of n)e.push(new it(this._language,t))}}return e}},{key:"_getMyTeamsChannels",value:function(){const e=[];if(this._myTeams){const t=this._myTeams.getParticipantKeysFromLsid();if(t)for(const n of t)e.push(new Ye(this._language,n))}return e}},{key:"_getLoginClientChannels",value:function(){const e=[];if(this._loginClient&&this._loginClient.loggedIn()){const t=this._loginClient.id(),n=this._loginClient.email(),i=this._loginClient.hash(),r=this._loginClient.namespace();t&&n&&r&&i&&(e.push(new Xe(n,r)),this._credentials.setCredentials(new pt(t,n,i,r)))}return e}},{key:"hasMyTeamsOrMyGames",value:function(){const e=!(!this._myTeams||!this._myTeams.getCount()),t=!(!this._myGames||!this._myGames.getCount());return e||t}}])&&mt(t.prototype,n),i&&mt(t,i),e}();function Ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Pt=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_id")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._id=t}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&Ct(t.prototype,n),i&&Ct(t,i),e}();function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let St=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ot(this,"_key","lsnp_channels"),Ot(this,"_storage",void 0),Ot(this,"_channels",void 0),this._storage=t,this._channels=new rt.FJ({serialize:e=>e.getId()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{t._storage.get(t._key).then((i=>{if(i)for(const e of i)t._channels.add(new Pt(e));else e&&e.getAll().forEach((e=>{t._channels.add(e)}));n(t._channels)}))}))}},{key:"getChannels",value:function(){return this._channels.clone()}},{key:"setChannels",value:function(e){return new Promise(((t,n)=>{this._channels.clear();const i=[];for(const t of e)this._channels.add(t),i.push(t.getId());this._storage.set(this._key,i).then((()=>t())).catch((e=>n()))}))}}])&&Tt(t.prototype,n),i&&Tt(t,i),e}();function It(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let At=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Et(this,"STORAGE_KEY","lsnp_token"),Et(this,"_storage",void 0),Et(this,"_tokens",void 0),this._storage=t,this._tokens=new rt.FJ({serialize:e=>e.getToken()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{this._storage.get(this.STORAGE_KEY).then((i=>{i?t._tokens.add(new bt(i._lsnpPath,i._language,i._token,i._enabled)):e&&e.getAll().forEach((e=>{t._tokens.add(e)})),n(t._tokens)}))}))}},{key:"getToken",value:function(){const e=this._tokens.clone().getAll();return e.length?e[0]:new bt("","")}},{key:"setToken",value:function(e){return new Promise(((t,n)=>{this._tokens.clear(),this._tokens.add(e),this._storage.set(this.STORAGE_KEY,e).then((()=>t())).catch((e=>n()))}))}}])&&It(t.prototype,n),i&&It(t,i),e}();function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Lt(e);if(t){var r=Lt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return qt(this,n)}}function qt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Dt(e):t}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}let Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(n,e);var t=Nt(n);function n(...e){var i,r,s,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i=t.call.apply(t,[this].concat(e)),r=Dt(i),o="lsnp_channels_disabled",(s="_key")in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o,i}return n}(St);function Ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Wt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(this,"STORAGE_KEY","lsnp_credentials_3"),Mt(this,"_storage",void 0),Mt(this,"_credentials",void 0),this._storage=t,this._credentials=new rt.FJ({serialize:e=>e.getHash()}),this._loadCredentials()}var t,n,i;return t=e,(n=[{key:"getCredentials",value:function(){return this._credentials.clone()}},{key:"setCredentials",value:function(e){return new Promise(((t,n)=>{this._credentials.clear(),this._credentials.add(e),this._storage.set(this.STORAGE_KEY,e).then((()=>t())).catch((e=>n()))}))}},{key:"_loadCredentials",value:function(){const e=this;this._storage.get(this.STORAGE_KEY).then((t=>{t&&e._credentials.add(new pt(t._id,t._email,t._hash,t._namespace))}))}}])&&Ft(t.prototype,n),i&&Ft(t,i),e}();function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ut=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xt(this,"_key","lsnp_options"),xt(this,"_storage",void 0),xt(this,"_options",void 0),this._storage=t,this._options=new rt.FJ({serialize:e=>e.getValue()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{this._storage.get(this._key).then((i=>{if(i)for(const e of i)t._options.add(new at.I(e));else e&&e.getAll().forEach((e=>{t._options.add(e)}));n(t._options)}))}))}},{key:"getOptions",value:function(){return this._options.clone()}},{key:"setOptions",value:function(e){return new Promise(((t,n)=>{this._options.clear();const i=[];for(const t of e)this._options.add(t),i.push(t.getValue());this._storage.set(this._key,i).then((()=>t())).catch((e=>n()))}))}}])&&Gt(t.prototype,n),i&&Gt(t,i),e}();function zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jt(this,"_window",window),Jt(this,"_navigator",navigator),Jt(this,"_messaging",void 0),Jt(this,"_serviceWorkerLocation",void 0),Jt(this,"_logger",void 0),Jt(this,"_language",void 0),Jt(this,"_platformPrefix",void 0),Jt(this,"_token",void 0),Jt(this,"_currentChannels",void 0),Jt(this,"_currentDisabledChannels",void 0),Jt(this,"_currentOptions",void 0),Jt(this,"_credentials",void 0)}var t,n,i;return t=e,(n=[{key:"setFirebaseConfiguration",value:function(e){return(0,r.ZF)(e),this._messaging=(0,y.KL)(),this}},{key:"setLanguage",value:function(e){return this._language=e,this}},{key:"setPlatformPrefix",value:function(e){return this._platformPrefix=e,this}},{key:"setBrowserDepenedency",value:function(e,t){return this._window=e,this._navigator=t,this}},{key:"setServiceWorkerLocation",value:function(e){return this._serviceWorkerLocation=e,this}},{key:"setTokenStorage",value:function(e){return this._token=new At(e),this}},{key:"setSettingsStorage",value:function(e){return this._currentChannels=new St(e),this._currentDisabledChannels=new Rt(e),this._currentOptions=new Ut(e),this}},{key:"setCredentialsStorage",value:function(e){return this._credentials=new Wt(e),this}},{key:"setLogger",value:function(e){return this._logger=e,this}},{key:"build",value:function(){return new kt(this._messaging,this._language,this._platformPrefix,this._window,this._navigator,this._serviceWorkerLocation,this._token,this._currentChannels,this._currentDisabledChannels,this._currentOptions,this._credentials,this._logger)}}])&&zt(t.prototype,n),i&&zt(t,i),e}();var Ht=n(79475);function Zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Bt=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_storage")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._storage=new Ht.oQ(Ht.W.make(t))}var t,n,i;return t=e,(n=[{key:"getStorage",value:function(){return this._storage}}])&&Zt(t.prototype,n),i&&Zt(t,i),e}();var Kt,$t,Yt,Qt,Xt,en,tn,nn,rn,sn,on,an,ln,un,cn,hn=n(27925);Kt=document,$t=navigator,Yt=window,Qt=cjs.Api.clientStorage,Xt=cjs.dic.get("util_trans"),en=cjs.Api.loader.get("notifications"),tn=cjs.Api.loader.get("notifications/gui"),nn=cjs.Api.loader.get("notifications/subscribe"),rn=cjs.Api.loader.get("cjs"),sn=cjs.Api.loader.get("myGames"),on=cjs.Api.loader.get("myTeams"),an=cjs.Api.loader.get("loginClient"),ln=cjs.dic.get("HighlightWindowManager"),un=()=>cjs.Api.config.get("app","google_analytics","event_tracking"),cn=window.dataLayer=window.dataLayer||[],rn.call((e=>{if(!cjs.Api.config.get("app","native_notifications","enabled")||!(0,y.Gb)()||!cjs.dic.get("util_browser").isMobile()&&cjs.Api.config.get("app","project","id")!=hn.m.TESTLIVESPORT_CZ_CZ&&cjs.Api.config.get("app","project","id")!=hn.m.TESTLIVESPORT_CZ_EN)return void en.fulfill((e=>{e(!1)}));const t=cjs.Api.config.get("app","url_prefix")+"/x/js/worker.js",n=(new Vt).setFirebaseConfiguration(cjs.Api.config.get("app","native_notifications","firebase")).setPlatformPrefix(cjs.Api.config.get("app","native_notifications","lsnp")).setLanguage(cjs.Api.config.get("app","lang","web")).setBrowserDepenedency(Yt,$t).setServiceWorkerLocation(t).setTokenStorage(new Bt("lsnp").getStorage()).setSettingsStorage(new Bt("lsnp").getStorage()).setCredentialsStorage(new Bt("lsnp").getStorage()).setLogger((e=>{clog("PushNotification",e)})).build();if("Notification"in Yt){const e=document.getElementById("notifications-alert-wrapper"),t=n.getNotificationInit(),r=()=>{t.run().then((e=>{n.getStatusAlert().hideAlert(),e==i.INITIALIZED?(()=>{un()&&cn.push({event:"webNotificationStatus",webNotification:"on"});const e=Kt.getElementById("userNotifications");e&&e.classList.add("userControls__item--open"),tn.call((t=>{t.enable(),e&&e.addEventListener("click",(e=>{ln.changeActive("verticalMenu",!1),t.getHandlerOnClick()(e)}))})),n.enable();const t=()=>(n.getStatusAlert().showAlert(),n.synchronize());sn.call((e=>{n.setMyGames(e),e.addChangeCallback(t),t()})),on.call((e=>{n.setMyTeams(e),e.registerCallback("add",t),e.registerCallback("remove",t),e.registerCallback("dataLoaded",t),t()})),an.call((e=>{n.setLoginClient(e),e.registerCallback("login",t),e.registerCallback("logout",t),e.registerCallback("dataSyncChange/mygames",t),e.registerCallback("dataSyncChange/myTeams",t),t()})),en.fulfill((e=>{e(n)}))})():un()&&cn.push({event:"webNotificationStatus",webNotification:"off"})})).catch((e=>{n.getStatusAlert().hideAlert()}))};nn.fulfill((e=>{e(r)}));const s=()=>{un()&&cn.push({event:"webNotificationStatus",webNotification:"off"}),tn.call((e=>{e.updateStatus()}));const e=()=>{n.getStatusAlert().showAlert();const e=Kt.getElementById("notifications-alert");if(e){const t=e.querySelector(".alert__close");t&&t.addEventListener("click",(()=>{Qt.storeSession("LS_notifications_dismissed",1,1209600)}))}};sn.call((t=>{n.setMyGames(t),t.addChangeCallback(e),e()})),on.call((t=>{n.setMyTeams(t),t.registerCallback("add",e),t.registerCallback("remove",e),t.registerCallback("dataLoaded",e),e()})),an.call((t=>{n.setLoginClient(t),t.registerCallback("login",e),t.registerCallback("logout",e),t.registerCallback("dataSyncChange/mygames",e),t.registerCallback("dataSyncChange/myTeams",e),e()}))},o=()=>{un()&&cn.push({event:"webNotificationStatus",webNotification:"disallow"}),tn.call((e=>{e.updateStatus()}));const e=Kt.getElementById("notifications-alert");if(e){const t=e.querySelector(".alert__close");t&&t.addEventListener("click",(()=>{Qt.storeSession("LS_notifications_dismissed",1,7776e3)}))}const t=Kt.getElementById("userNotifications");if(t){t.classList.add("userControls__item--open");const e=t.querySelector(".userControls__textNotifications");e&&e.classList.add("userControls__textNotifications--open")}};n.setPermissionProvider((()=>Notification.permission)).setAlertWrapper(e).getStatusAlert().setStorage(Qt).setTranslations(Xt).setSubscribeCallback(r).setPendingCallback(s).setDeniedCallback(o).run()}}))},25702:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{c:()=>s});let s=function(){function e(t,n,i=new Map,s=e.DEFAULT_CONNECTION_TIMEOUT,o=e.DEFAULT_PENDING_TIMEOUT){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_url",void 0),r(this,"_headers",void 0),r(this,"_parameters",void 0),r(this,"_connectionTimeout",void 0),r(this,"_pendingTimeout",void 0),this._url=t,this._parameters=n,this._headers=i,this._connectionTimeout=s,this._pendingTimeout=o}var t,n,s;return t=e,(n=[{key:"getConnectionTimeout",value:function(){return this._connectionTimeout}},{key:"getPendingTimeout",value:function(){return this._pendingTimeout}},{key:"getUrl",value:function(){return this._url}},{key:"getParameters",value:function(){return this._parameters}},{key:"getHeaders",value:function(){return this._headers}}])&&i(t.prototype,n),s&&i(t,s),e}();r(s,"DEFAULT_CONNECTION_TIMEOUT",5e3),r(s,"DEFAULT_PENDING_TIMEOUT",15e3)},8789:(e,t,n)=>{n.d(t,{A:()=>s,_:()=>o});var i=n(64216),r=n(62938);const s=[new r.I("sport_1;3"),new r.I("sport_1;4"),new r.I("sport_1;41"),new r.I("sport_2;3"),new r.I("sport_3;3"),new r.I("sport_4;3"),new r.I("sport_4;4"),new r.I("sport_4;41"),new r.I("sport_5;3"),new r.I("sport_6;3"),new r.I("sport_7;3"),new r.I("sport_8;3"),new r.I("sport_9;3"),new r.I("sport_10;3"),new r.I("sport_11;3"),new r.I("sport_12;3"),new r.I("sport_13;3"),new r.I("sport_14;3"),new r.I("sport_15;3"),new r.I("sport_16;3"),new r.I("sport_17;3"),new r.I("sport_18;3"),new r.I("sport_19;3"),new r.I("sport_21;3"),new r.I("sport_22;3"),new r.I("sport_24;3"),new r.I("sport_25;3"),new r.I("sport_26;3"),new r.I("sport_28;3"),new r.I("sport_29;3"),new r.I("sport_30;3"),new r.I("sport_34;63"),new r.I("sport_36;3"),new r.I("sport_23;63"),new r.I("sport_23;103"),new r.I("sport_23;62"),new r.I("sport_23;60"),new r.I("sport_23;101"),new r.I("sport_23;61"),new r.I("sport_42;3"),new r.I("sport_31;63"),new r.I("sport_31;103"),new r.I("sport_31;62"),new r.I("sport_32;63"),new r.I("sport_32;103"),new r.I("sport_32;62"),new r.I("sport_33;63"),new r.I("sport_33;103"),new r.I("sport_33;62"),new r.I("sport_37;60"),new r.I("sport_37;61"),new r.I("sport_37;101"),new r.I("sport_37;62"),new r.I("sport_37;63"),new r.I("sport_37;103"),new r.I("sport_38;60"),new r.I("sport_38;61"),new r.I("sport_38;101"),new r.I("sport_38;62"),new r.I("sport_38;63"),new r.I("sport_38;103"),new r.I("sport_39;60"),new r.I("sport_39;61"),new r.I("sport_39;101"),new r.I("sport_39;62"),new r.I("sport_39;63"),new r.I("sport_39;103"),new r.I("sport_40;60"),new r.I("sport_40;61"),new r.I("sport_40;101"),new r.I("sport_40;62"),new r.I("sport_40;63"),new r.I("sport_40;103"),new r.I("sport_41;60"),new r.I("sport_41;61"),new r.I("sport_41;101"),new r.I("sport_41;62"),new r.I("sport_41;63"),new r.I("sport_41;103")];function o(){const e=new i.FJ({serialize:e=>e.getValue()});for(const t of s)e.add(t);return e}},62938:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{I:()=>r});let r=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_id")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._id=t}var t,n,r;return t=e,(n=[{key:"getValue",value:function(){return this._id}}])&&i(t.prototype,n),r&&i(t,r),e}()},27925:(e,t,n)=>{var i;n.d(t,{m:()=>i}),function(e){e[e.FLASHSCORE_CO_KR=34]="FLASHSCORE_CO_KR",e[e.FLASHSCORE_CO_JP=39]="FLASHSCORE_CO_JP",e[e.TESTLIVESPORT_CZ_CZ=29]="TESTLIVESPORT_CZ_CZ",e[e.TESTLIVESPORT_CZ_EN=49]="TESTLIVESPORT_CZ_EN"}(i||(i={}))}},e=>{e.O(0,[1216],(()=>{return t=23831,e(e.s=t);var t}));e.O()}]);